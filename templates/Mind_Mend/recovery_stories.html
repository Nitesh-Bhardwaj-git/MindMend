{% extends 'base.html' %}
{% block title %}Recovery Stories{% endblock %}
{% block content %}
<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <h2 class="text-2xl font-semibold mb-2">Share Recovery Stories</h2>
    <p class="text-gray-600 mb-6">Peer-to-peer support: read and share recovery journeys. All posts can be anonymous.</p>
    <div class="flex gap-2 mb-6">
        <a href="{% url 'forum_list' %}" class="text-primary font-medium hover:underline">← All forum</a>
        <a href="{% url 'forum_create' %}?category=recovery" class="inline-block px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition">Share your story</a>
    </div>
    {% for post in posts %}
    <div class="forum-post bg-white rounded-xl shadow p-6 mb-4">
        <h5 class="font-semibold text-lg"><a href="{% url 'forum_detail' post.pk %}" class="text-primary hover:underline">{{ post.title }}</a></h5>
        <p class="text-gray-500 text-sm mb-2">
            {% if post.is_anonymous %}Anonymous{% else %}{{ post.author.username }}{% endif %} · {{ post.created_at|date:"M d, Y" }}
            · {{ post.reply_count }} repl{{ post.reply_count|pluralize:"y,ies" }}
        </p>
        <p class="text-gray-700">{{ post.content|truncatewords:40 }}</p>
    </div>
    {% empty %}
    <p class="text-gray-600">No recovery stories yet. <a href="{% url 'forum_create' %}?category=recovery" class="text-primary font-medium hover:underline">Share yours</a>.</p>
    {% endfor %}
    {% if posts.has_other_pages %}
    <nav class="mt-6 flex gap-4">
        {% if posts.has_previous %}
        <a href="?page={{ posts.previous_page_number }}" class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">Previous</a>
        {% endif %}
        {% if posts.has_next %}
        <a href="?page={{ posts.next_page_number }}" class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">Next</a>
        {% endif %}
    </nav>
    {% endif %}
</div>
{% endblock %}
